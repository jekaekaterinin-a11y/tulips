<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Учет тюльпанов</title>
<style>
body { font-family: Arial; background:#f4f4f4; padding:20px; }
table { border-collapse: collapse; width: 700px; background:white; }
th, td { border:1px solid #ccc; padding:10px; text-align:center; }
th { background:#222; color:white; }
input { width:80px; padding:5px; text-align:center; }
.low { background:#ffb3b3; }
.total { font-weight:bold; background:#eee; }
</style>
</head>
<body>

<h2>Учет тюльпанов</h2>

<table id="stockTable">
<thead>
<tr>
<th>Расцветка</th>
<th>Закуп</th>
<th>Продано</th>
<th>Остаток</th>
</tr>
</thead>
<tbody>
<tr><td>Красные</td><td>1000</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
<tr><td>Розовые</td><td>500</td><td><input type="number" value="180"></td><td class="remain"></td></tr>
<tr><td>Белые</td><td>1000</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
<tr><td>Малиновые</td><td>500</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
<tr><td>Нежно фиол</td><td>500</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
<tr><td>Оранжевые пион</td><td>350</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
<tr><td>Коламбус пион</td><td>500</td><td><input type="number" value="0"></td><td class="remain"></td></tr>
</tbody>
<tfoot>
<tr class="total">
<td>Общее</td>
<td id="totalBuy"></td>
<td id="totalSold"></td>
<td id="totalRemain"></td>
</tr>
</tfoot>
</table>

<script>
function calculate() {
    let rows = document.querySelectorAll("#stockTable tbody tr");
    let totalBuy = 0;
    let totalSold = 0;
    let totalRemain = 0;

    rows.forEach(row => {
        let buy = parseInt(row.cells[1].innerText);
        let soldInput = row.cells[2].querySelector("input");
        let sold = parseInt(soldInput.value) || 0;
        let remain = buy - sold;

        row.cells[3].innerText = remain;

        if (remain < 100) {
            row.cells[3].classList.add("low");
        } else {
            row.cells[3].classList.remove("low");
        }

        totalBuy += buy;
        totalSold += sold;
        totalRemain += remain;
    });

    document.getElementById("totalBuy").innerText = totalBuy;
    document.getElementById("totalSold").innerText = totalSold;
    document.getElementById("totalRemain").innerText = totalRemain;
}

document.querySelectorAll("input").forEach(input => {
    input.addEventListener("input", calculate);
});

calculate();
</script>

</body>
</html>